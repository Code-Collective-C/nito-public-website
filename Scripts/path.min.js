var Path={version:"0.8.4",map:function(n){return Path.routes.defined.hasOwnProperty(n)?Path.routes.defined[n]:new Path.core.route(n)},root:function(n){Path.routes.root=n},rescue:function(n){Path.routes.rescue=n},history:{initial:{},pushState:function(n,t,i){Path.history.supported?Path.dispatch(i)&&history.pushState(n,t,i):Path.history.fallback&&(window.location.hash="#"+i)},popState:function(){var n=!Path.history.initial.popped&&location.href==Path.history.initial.URL;(Path.history.initial.popped=!0,n)||Path.dispatch(document.location.pathname)},listen:function(n){if(Path.history.supported=!!(window.history&&window.history.pushState),Path.history.fallback=n,Path.history.supported)Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href,window.onpopstate=Path.history.popState;else if(Path.history.fallback){for(route in Path.routes.defined)route.charAt(0)!="#"&&(Path.routes.defined["#"+route]=Path.routes.defined[route],Path.routes.defined["#"+route].path="#"+route);Path.listen()}}},match:function(n,t){var s={},r=null,o,u,i,e,f;for(r in Path.routes.defined)if(r!==null&&r!==undefined)for(r=Path.routes.defined[r],o=r.partition(),e=0;e<o.length;e++){if(u=o[e],f=n,u.search(/:/)>0)for(i=0;i<u.split("/").length;i++)i<f.split("/").length&&u.split("/")[i].charAt(0)===":"&&(s[u.split("/")[i].replace(/:/,"")]=f.split("/")[i],f=f.replace(f.split("/")[i],u.split("/")[i]));if(u===f)return t&&(r.params=s),r}return null},dispatch:function(n){var t,i;if(Path.routes.current!==n){if(Path.routes.previous=Path.routes.current,Path.routes.current=n,i=Path.match(n,!0),Path.routes.previous&&(t=Path.match(Path.routes.previous),t!==null&&t.do_exit!==null&&t.do_exit()),i!==null)return i.run(),!0;Path.routes.rescue!==null&&Path.routes.rescue()}},listen:function(){var n=function(){Path.dispatch(location.hash)};location.hash===""&&Path.routes.root!==null&&(location.hash=Path.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=n:setInterval(n,50),location.hash!==""&&Path.dispatch(location.hash)},core:{route:function(n){this.path=n,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},Path.routes.defined[n]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(n){return this.action=n,this},enter:function(n){return n instanceof Array?this.do_enter=this.do_enter.concat(n):this.do_enter.push(n),this},exit:function(n){return this.do_exit=n,this},partition:function(){for(var i=[],n=[],r,t;r=/\(([^}]+?)\)/g.exec(this.path);)i.push(r[1]);for(n.push(this.path.split("(")[0]),t=0;t<i.length;t++)n.push(n[n.length-1]+i[t]);return n},run:function(){var t=!1,n,i;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")&&Path.routes.defined[this.path].do_enter.length>0)for(n=0;n<Path.routes.defined[this.path].do_enter.length;n++)if(i=Path.routes.defined[this.path].do_enter[n].apply(this,null),i===!1){t=!0;break}t||Path.routes.defined[this.path].action()}};
//@ sourceMappingURL=path.min.js.map